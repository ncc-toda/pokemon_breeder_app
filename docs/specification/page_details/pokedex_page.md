# 図鑑画面 詳細設計書

## 概要

ポケモンの一覧を表示し、ユーザーがポケモンを検索したり、パーティに追加したりするための画面。
本画面は、ボトムナビゲーションバーの「図鑑」タブからアクセスされる。

## 目的

- PokeAPI から取得したポケモンデータを一覧表示する。
- ユーザーが特定のポケモンを簡単に見つけられるように検索機能を提供する。
- ポケモンを選択してパーティに編成する起点となる。

## レイアウト・デザイン

- **全体**:
  - 上部に検索バーを配置。
  - その下にポケモン一覧をグリッド形式で表示する。

## コンポーネント仕様

### 検索バー

- **機能**:
  - ポケモン名（英語のみ）または図鑑番号で検索を実行する。
  - 検索ボタンを押すと、検索結果がリストに反映される。
- **UI**:
  - `TextField` を使用し、プレースホルダーとして「ポケモン名 or 図鑑番号で検索」と表示する。
  - 検索ボタンを配置し、入力内容をリセットできるようにする。
  - 検索結果が 0 件の場合は、「検索結果がありません」と表示する。

### ポケモンリスト

- **機能**:
  - ポケモンをリスト状に一覧表示する (`ListView`)。
  - 無限スクロールを実装し、リストの末尾に到達すると次のページのポケモンを自動で読み込む。
  - 各ポケモンをタップすると、パーティに追加するための確認ダイアログが表示される。
  - 1 度の取得で 20 件のポケモンを取得する。
- **UI**:
  - **ポケモンリスト**:
    - 各ポケモンはリスト形式で表示する。
    - リスト内には以下の要素を含む:
      - ポケモンの公式画像（スプライト）。
      - ポケモン名（英語）。
      - 図鑑番号（`#xxx`形式）。
  - **ローディング表示**:
    - 初回読み込み時や追加読み込み中には、`Shimmer`エフェクトを用いたスケルトンローディングを表示する。
      - 追加読込中は、今まで表示していたポケモンのリストを表示し続ける。
    - エラー発生時には、エラーメッセージとリトライボタンを表示する。

### パーティ追加確認ダイアログ

- **機能**:
  - 各ポケモンのリストの右側に「+」ボタンを配置する。
    - 「+」ボタンをタップすると、パーティに追加される。（確認はしない）
    - パーティーが既に 6 匹の場合は、「+」ボタンを非活性表示にする。
    - 既に追加済のポケモンの場合は「-」ボタンを表示する。
      - 「-」ボタンをタップすると、確認ダイアログが表示され、承認するとパーティから削除される。
- **UI**:
  - ポケモンの画像と名前を表示し、どのポケモンを対象としているか明確にする。

## 非機能要件

- **パフォーマンス**:
  - 無限スクロール時に UI がカクつかないよう、リストの描画を最適化する。
  - 画像読み込みはキャッシュを利用し、表示を高速化する（`cached_network_image`など）。
- **オフライン対応**:
  - ネットワークに接続されていない状態で画面を開いた場合、オフライン状態であることを示すメッセージを表示する。
