# ナビゲーション設計書

## 概要

本アプリケーションの主要な画面遷移は、ボトムナビゲーションバーを介して行われる。
ユーザーはこのナビゲーションバーを利用して、主要機能である「図鑑」と「パーティ」の画面を素早く切り替えることができる。

## 目的

- 主要機能へのアクセス性を向上させる。
- 直感的で一貫性のあるユーザー体験を提供する。
- 各画面の状態を維持し、スムーズな画面遷移を実現する。

## ナビゲーション構成

アプリケーションのメイン画面は `Scaffold` で構成され、その `bottomNavigationBar` プロパティにボトムナビゲーションバーを配置する。

### ボトムナビゲーションバー

- **表示画面**:
  - `図鑑画面` (`pokedex_page`)
  - `パーティ画面` (`party_page`)
- **タブ**:
  1.  **図鑑 (Pokedex)**
      - **アイコン**: `Icon(Icons.search)`
      - **ラベル**: `図鑑`
      - **遷移先**: `pokedex_page.md`
  2.  **パーティ (Party)**
      - **アイコン**: `Icon(Icons.pets)`
      - **ラベル**: `パーティ`
      - **遷移先**: `party_page.md`

### 画面遷移時の状態管理

ユーザー体験向上のため、ボトムナビゲーションバーで画面を切り替えても、各画面の状態（スクロール位置、入力内容など）は保持されるように設計する。

- **実装方針**:
  - `IndexedStack` ウィジェットを使用して、各画面のウィジェットツリーをメモリ上に保持する。これにより、タブを切り替えても各ページの状態がリセットされることなく維持される。
  - `PageStorage` と `PageStorageKey` を組み合わせ、スクロール位置などの一部の状態をより確実に永続化する。

これにより、ユーザーが図鑑で特定のポケモンまでスクロールした後にパーティ画面に切り替え、再び図鑑画面に戻ってきた際も、元のスクロール位置が復元される。
